/* == Region Details Page Specific Styles == */

.region-details-page {
    padding: 30px 0 60px 0; /* Меньше отступ сверху, больше снизу */
}

/* --- Region Header Row --- */
.region-details-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 30px; /* Отступ до статистики */
    gap: 15px; /* Отступ между элементами */
}

.back-button {
    /* Наследует .btn-icon из style.css */
    color: var(--text-color); /* Белая стрелка */
    padding: 5px;
    margin-right: 20px;
}

/* SVG иконка внутри кнопки .btn-icon */

.region-details-title {
    font-size: 1.8rem; /* Размер заголовка региона */
    font-weight: 700;
    margin-bottom: 0; /* Убираем отступ у H1 */
    text-align: center; /* Центрируем, так как кнопка назад его сдвигает */
    flex-grow: 1; /* Занимает центральное место */
    color: var(--text-color);
}

.join-team-btn {
    /* Использует .btn и .btn-secondary из style.css */
    padding: 0.6em 1em; /* Меньше паддинги */
    font-size: 0.9rem;
    flex-shrink: 0; /* Не сжиматься */
    background-color: rgba(42, 42, 74, 0.6); /* Фон как на последнем скриншоте */
    border: 1px solid rgba(58, 58, 90, 0.8); /* Рамка */
    color: var(--text-muted-color); /* Приглушенный цвет текста */
}

.join-team-btn:hover {
    background-color: rgba(58, 58, 90, 0.7); /* Чуть светлее при наведении */
    border-color: rgba(85, 85, 119, 0.9); /* Рамка светлее */
    color: var(--text-color); /* Текст белый при наведении */
}

/* --- Stats Grid --- */
.region-stats-grid {
    display: grid;
    gap: 15px; /* Отступы между карточками */
    margin-bottom: 40px; /* Отступ до списка субъектов */

    /* Магия адаптивности:
       auto-fit: создать столько колонок, сколько поместится
       minmax(180px, 1fr): каждая колонка минимум 180px,
                           но может растягиваться (1fr) чтобы заполнить пространство.
                           Подбирайте min_width (180px) для нужных точек переноса!
    */
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    /* Убираем специфичные стили для desktop grid */
    /* grid-template-areas, grid-column, grid-row - больше не нужны здесь */
}

.stat-card {
    position: relative;
    background-color: var(--secondary-color); /* Темный фон для обычных */
    color: var(--Blue);
    padding: 20px 15px;
    border-radius: 8px;
    min-height: 120px; /* Базовая высота карточки */
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    overflow: hidden;
    /* Сбрасываем специфичные для колонок/строк grid-свойства, если были */
    grid-column: auto;
    grid-row: auto;
}

.stat-number {
    text-align: start;
    font-size: 4rem; /* Большой номер */
    font-weight: 700;
    line-height: 1;
}

.stat-label {
    font-weight: 700;
    font-size: 0.85rem;
    color: var(--text-color); /* Бледный текст */
    line-height: 1.3;
}

.stat-arrow {
    position: absolute;
    bottom: 12px;
    right: 12px;
    width: 18px; /* Маленькая стрелка */
    height: 18px;
    filter: brightness(0) saturate(100%) invert(100%) sepia(0%) saturate(0%) hue-rotate(93deg) brightness(103%) contrast(103%); /* White */
}

/* Большая ромбовидная стрелка */
.stat-arrow--large-diamond {
    width: 45px; /* Размер по макету */
    height: 45px;
    bottom: 15px;
    right: 15px;
    transform: rotate(0deg); /* Без поворота */
    opacity: 0.8;
}

/* Карточка "Команд" видна только на мобильных */
.mobile-only-stat {
    display: flex; /* Показываем по умолчанию (для mobile) */
}

/* Убираем стрелку у карточки "Команд" (5-я по счету в HTML) */
.region-stats-grid .stat-card:nth-child(5) .stat-arrow {
    display: none;
}

/* Выделенная карта - базовая стилизация */
.stat-card--highlighted {
    background-color: var(--Blue);
    color: var(--text-color);
}

.stat-card--highlighted .stat-label {
    color: rgba(255, 255, 255, 0.8);
}

/* На мобильных устройствах выделенная карта (с классом full-height-highlight) занимает всю ширину последней строки */
.full-height-highlight {
    grid-column: 1 / -1; /* Занять все колонки (на мобиле 2) */
    min-height: 140px; /* Увеличим высоту */
}


/* --- Subjects List --- */

/* Стили для заголовка "Субъекты" */
.subjects-list-title {
    display: block; /* Показываем на мобильных по умолчанию */
    font-size: 1.3rem;
    font-weight: 600;
    margin-bottom: 1em;
    text-align: left;
    color: var(--text-color);
}

/* Контейнер списка */
.subjects-list {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

/* --- Стили для Аккордеона (Expandable Subject List) --- */
.subject-item {
    background-color: var(--secondary-color);
    border-radius: 8px;
    transition: background-color 0.3s ease;
    overflow: hidden;
    cursor: default; /* Курсор по умолчанию для не-expandable */
}

.subject-item.expandable {
    cursor: pointer;
}

.subject-item.expandable:hover,
.subject-item.expandable:focus-visible {
    background-color: var(--hover-secondary-bg);
}

.subject-item.expandable:focus {
    outline: none;
}

.subject-item__header {
    display: flex;
    align-items: center;
    padding: 12px 15px;
    gap: 20px;
}

.subject-code {
    background-color: var(--Blue);
    color: var(--text-color);
    font-weight: 600;
    padding: 5px 8px;
    border-radius: 4px;
    flex-shrink: 0;
    font-size: 0.9rem;
    min-width: 40px;
    text-align: center;
    height: fit-content;
    margin-right: 0; /* Use parent gap */
}

.subject-name {
    font-size: 0.95rem;
    font-weight: 500;
    flex-grow: 1;
    margin-right: auto; /* Pushes indicator right */
}

.expand-indicator {
    flex-shrink: 0;
    color: var(--text-muted-color);
    transition: transform 0.3s ease-out;
    margin-left: 10px;
}

.expand-indicator svg {
    display: block;
    width: 20px;
    height: 20px;
    fill: currentColor;
}

/* Скрытый блок с деталями */
.subject-item__details {
    max-height: 0;
    opacity: 0;
    overflow: hidden;
    transition: max-height 0.4s ease-in-out, opacity 0.3s ease-in-out, padding 0.4s ease-in-out, margin 0.4s ease-in-out;
    padding: 0 15px; /* Collapsed state padding */
    margin: 0; /* Collapsed state margin */
    background-color: rgba(42, 42, 74, 0.5); /* Details background */
    border-top: 1px solid rgba(58, 58, 90, 0.5); /* Separator */
}

/* Раскрытое состояние */
.subject-item.expanded {
    /* Optional: background change for expanded item's main part */
    /* background-color: var(--hover-secondary-bg); */
}

.subject-item.expanded .subject-item__details {
    max-height: 500px; /* Allow enough height */
    opacity: 1;
    padding: 15px 15px 20px 15px; /* Expanded padding */
    margin-top: 0;
}

.subject-item.expanded .expand-indicator {
    transform: rotate(180deg);
}

/* Стили для содержимого .subject-item__details */
.subject-contact-info {
    display: flex;
    align-items: flex-start;
    gap: 10px 15px;
    width: 100%;
}

.contact-photo {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    object-fit: cover;
    flex-shrink: 0;
    margin-top: 2px;
}

.contact-text {
    display: flex;
    flex-direction: column;
    gap: 4px;
    flex-grow: 1;
    min-width: 150px;
}

.contact-name {
    font-size: 1rem;
    font-weight: 600;
    color: var(--text-color);
    line-height: 1.2;
}

.contact-title {
    font-size: 0.85rem;
    color: var(--text-muted-color);
    line-height: 1.2;
}

.contact-region-name { /* Specific class for mobile region name display */
    display: block; /* Visible by default (Mobile) */
    font-size: 0.8rem;
    color: var(--text-muted-color);
    margin-bottom: 4px;
    /* This will be hidden on desktop via media query */
}

.contact-email {
    display: flex;
    align-items: center;
    gap: 8px;
    color: var(--text-muted-color);
    font-size: 0.85rem;
    text-decoration: none;
    transition: color 0.3s ease;
    /*width: 100%; !* Mobile first - full width *!*/
    padding-left: calc(40px + 20px + 50px + 15px); /* Indentation based on code+gap+photo+gap */
    box-sizing: border-box;
    /*margin-top: 5px; !* Space from text block *!*/
}

.contact-email svg {
    width: 18px;
    height: 18px;
    fill: currentColor;
    flex-shrink: 0;
}

.contact-email:hover {
    color: var(--primary-color);
}


/* === Responsive Adjustments === */

/* -- Desktop and Larger Tablets -- */
@media (min-width: 769px) {
    .subjects-list-title {
        display: none; /* Hide "Subjects" title */
    }

    .desktop-stack-item { /* Elements stacked on the left */
        grid-column: 1 / 2; /* Put in first column */
        display: flex; /* Ensure they are displayed */
    }

    .full-height-highlight { /* Large card on the right */
        grid-column: 2 / 3; /* Put in second column */
        grid-row: 1 / 4; /* Span 3 rows */
        min-height: 410px; /* Approx. height to span 3 cards + 2 gaps */
        display: flex !important; /* Ensure visible */
        background-color: var(--Blue);
        color: var(--text-color);
    }

    .full-height-highlight .stat-label {
        color: rgba(255, 255, 255, 0.8);
    }


    .region-details-title {
        font-size: 2.2rem;
        text-align: left;
        margin-left: -34px; /* Compensate for back button */
    }

    /* Hide mobile region name in contact */
    .contact-region-name {
        display: none;
    }

    /* Adjust contact details layout for desktop */
    .subject-item.expanded .subject-contact-info {
        flex-wrap: nowrap;
        /*align-items: center;*/
    }

    .subject-item.expanded .contact-email {
        width: auto;
        padding-left: 0;
        margin-left: auto;
        /*margin-top: 0;*/
    }

    .subject-item.expanded  {
        margin-top: 0;
    }
}

/* -- Very Small Screens -- */
@media (max-width: 480px) {
    .region-details-header {
        position: relative;
        padding-top: 40px;
        flex-wrap: wrap;
        justify-content: center;
    }

    .back-button {
        position: absolute;
        left: 5px;
        top: 10px;
        z-index: 2;
    }

    .region-details-title {
        font-size: 1.5rem;
        width: 100%;
        text-align: center;
        order: 1;
        margin-left: 0; /* Reset compensation */
    }

    .join-team-btn {
        width: 100%;
        margin-top: 10px;
        order: 2;
    }

    .stat-card {
        padding: 15px 12px;
    }

    .stat-number {
        font-size: 2.2rem;
    }

    .stat-label {
        font-size: 0.8rem;
    }

    .full-height-highlight {
        min-height: 120px;
    }

    /* Reset large min-height for mobile */
    .subject-item__header {
        padding: 10px 12px;
        gap: 10px;
    }

    .subject-code {
        min-width: 30px;
        padding: 4px 6px;
        font-size: 0.8rem;
    }

    .subject-name {
        font-size: 0.9rem;
    }

    .expand-indicator {
        margin-left: 5px;
    }

    .expand-indicator svg {
        width: 18px;
        height: 18px;
    }


    .subject-item.expanded .subject-item__details {
        padding: 12px 12px 15px 12px;
    }

    .subject-item.expanded .subject-contact-info {
        gap: 8px;
    }

    .subject-item.expanded .contact-photo {
        width: 40px;
        height: 40px;
    }

    .subject-item.expanded .contact-name {
        font-size: 0.95rem;
    }

    .subject-item.expanded .contact-title {
        font-size: 0.8rem;
    }

    .subject-item.expanded .contact-email {
        width: 100%;
        /*padding-left: 0; !* Email starts left on smallest *!*/
        word-break: break-all;
        font-size: 0.8rem;
        margin-top: 8px;
        gap: 6px;
    }

    .subject-item.expanded .contact-email svg {
        width: 16px;
        height: 16px;
    }
}